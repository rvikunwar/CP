Maximum Sum

You have an array ğ‘ of ğ‘› integers.

You perform exactly ğ‘˜ operations on it. In one operation, you select any contiguous subarray of the array ğ‘ (possibly empty) and insert the sum of this subarray anywhere in the array.

Your task is to find the maximum possible sum of the array after ğ‘˜ such operations.

As this number can be very large, output the answer modulo 109+7.

Reminder: the remainder of a number ğ‘¥ modulo ğ‘ is the smallest non-negative ğ‘¦ such that there exists an integer ğ‘ and ğ‘¥=ğ‘â‹…ğ‘+ğ‘¦.

Input
Each test consists of several test cases. The first line contains a single integer ğ‘¡ (1â‰¤ğ‘¡â‰¤104) â€” the number of test cases. Then follows the description of the test cases.

The first line of each test case contains two integers ğ‘› and ğ‘˜ (1â‰¤ğ‘›,ğ‘˜â‰¤2â‹…105) â€” the length of the array ğ‘ and the number of operations, respectively.

The second line of each test case contains ğ‘› integers ğ‘1,ğ‘2,â€¦,ğ‘ğ‘› (âˆ’109â‰¤ğ‘ğ‘–â‰¤109) â€” the array ğ‘ itself.

It is guaranteed that the sum of the values of ğ‘› and ğ‘˜ for all test cases does not exceed 2â‹…105.

Output
For each test, output a single integer â€” the maximum sum of the array that can be obtained after ğ‘˜ operations modulo 109+7.

#include <bits/stdc++.h>
using namespace std;

int mod = 1000000007;

int main() {

    int t;
    cin>>t;

    while(t--){
        int n, k;
        cin>>n>>k;
        vector<int> vc(n, 0);

        for(int i=0; i<n; i++){
            cin>>vc[i];
        }

        long long sum = 0;
        long long maxSum = 0;
        long long s = 0;
        for(int i=0; i<n; i++){
            s += vc[i];
            sum += vc[i];
            if(sum < 0){
                sum = 0;
            }
            maxSum = max(maxSum, sum);
        }
        s -= maxSum;
        long long ans = maxSum;


        for(int i=0; i<k; i++){
            ans = (ans * 2);
            ans = ans%mod;
        }
        ans = (s + ans);
        ans = (mod + (ans % mod)) % mod;
        cout<<ans<<endl;
        
    }
    
}